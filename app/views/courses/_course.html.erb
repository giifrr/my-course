<div class="car shadow rounded">
  <div class="card-header">
    <i class="fa-solid fa-book"></i> <%= link_to course.title, course, class: "text-decoration-none text-dark" %>
    <span class="text-warning"><i class="fa-solid fa-star"></i></span> <%= course.average_rating %> 
  </div>
  <div class="card-body">
    <%= simple_format(truncate(course.short_description, length: 50)) %>
  </div>
  <div class="card-footer text-center">
    <%= enroll_button(current_user, course) %>
    <%= review_button(current_user, course) %>
    <i class="fa-solid fa-spinner"></i> <%= number_to_percentage(course.progress(current_user), precision: 0)  %>
  </div>
  <div class="card-footer">
    <div class="row">
      <div class="col-md-6">
        <i class="fa-solid fa-earth-americas"></i> <%= course.language %>
      </div>
      <div class="col-md-6 text-end">
        <i class="fa-solid fa-signal"></i> <%= course.level %>
      </div>
    </div>
  </div>
  <div class="card-footer">
    <i class="fa-solid fa-book-open"></i> <%= course.lessons_count %>
    (<i class="fa-solid fa-graduation-cap"></i> <%= course.enrollments_count %>)
    <i class="fa-solid fa-chalkboard-user"></i> <%= course.user.email.split('@').first %>
  </div>
  <div class="card-footer">
    <% if user_signed_in? && policy(course).edit?%>
      <!-- Edit Course -->
      <%= link_to "Edit", edit_course_path(course), class: "btn btn-warning" %>

      <!-- Button trigger modal -->
      <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">
        Delete Course
      </button>

      <!-- Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Are you sure want to delete this course?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <%= button_to "Delete course", course_path(course), method: :delete, class: "btn btn-danger" %>
            </div>
          </div>
        </div>
      </div>

      <!--Add Lesson  -->
      <%= link_to "Add Lesson", new_course_lesson_path(course), class: "btn btn-info" %>
    <% end %>
  </div>
</div>